--- ext/phar/phar.c_orig.c	2019-09-08 04:15:49.683987140 +0000
+++ ext/phar/phar.c	2019-09-08 18:18:40.378759322 +0000
@@ -1706,6 +1706,10 @@
 			}
 
 			if (got > 512) {
+window_size = strlen(pos);
+	if (phar_open_parsed_phar(fname, fname_len, alias, alias_len, 0, REPORT_ERRORS, NULL, 0 TSRMLS_CC) == SUCCESS) {
+		return SUCCESS;
+	}
 
 				if (phar_is_tar(pos, fname)) {
 					php_stream_rewind(fp);
