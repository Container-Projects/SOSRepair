diff --git a/libtiff/tif_read.c b/libtiff/tif_read.c
index 44cf3a1..6756728 100644
--- a/libtiff/tif_read.c
+++ b/libtiff/tif_read.c
@@ -161,6 +161,10 @@ TIFFReadEncodedStrip(TIFF* tif, uint32 strip, void* buf, tmsize_t size)
 		stripsize=size;
 	if (!TIFFFillStrip(tif,strip))
 		return((tmsize_t)(-1));
+
+size = stripsize;
+
+       stripsize;
 	if ((*tif->tif_decodestrip)(tif,buf,size,plane)<=0)
 		return((tmsize_t)(-1));
 	(*tif->tif_postdecode)(tif,buf,size);
